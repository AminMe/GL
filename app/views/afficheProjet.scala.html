@(projet: Projet, utilisateur: Utilisateur)

<div id="div-consulterProjet-@projet.id">
    <div class="row wrapper border-bottom white-bg page-heading" style="padding-bottom: 0px ; padding-right: 0px ;">

        <div class="col-sm-4">
            <h3 class="header-text"><div style="display:inline-block ;" id="projetName"> @Messages("project")
                : @projet.nom </div> <div id="projetPriorite" class="priorite">@projet.priorite</div>
            </h3>
            <h3 class="header-text">@Messages("client")
                : @projet.client.nom <div class="priorite">@projet.client.priorite</div> <a><i class="fa fa-search" data-toggle="modal" data-target="#modal-consulterClient-projet-@projet.id"></i></a></h3>
            <textarea id="descriptionProjet" readonly class="description" style="width: 100% ; height: 130px ;">@projet.description</textarea>
        </div>

        <div class="col-sm-3" id="">
            <h3 class="header-text">@Messages("projectPersonResponsible")
                : @projet.responsableProjet.prenom @projet.responsableProjet.nom</h3>
            <h3 class="header-text">@Messages("progress")
                : @projet.avancementGlobal%</h3>
            <div class="row-initiale">@Messages("initial")
                : @projet.chargeInitiale
                @if(projet.hasUniteJour()) {
                    @Messages("day-first-letter")
                } else {
                    @Messages("week-first-letter")
                }
            </div>
            <div class="row-restante">@Messages("remaining")
                : @projet.chargeRestante
                @if(projet.hasUniteJour()) {
                    @Messages("day-first-letter")
                } else {
                    @Messages("week-first-letter")
                }</div>
            <div class="progress progress-bar-default">
            @if(projet.avancementGlobal == 0) {
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                    0%
                </div>
            } else {
                <div class="progress-bar" role="progressbar" aria-valuenow="@projet.avancementGlobal" aria-valuemin="0" aria-valuemax="100" style="width: @projet.avancementGlobal% ;">
                    @projet.avancementGlobal%
                </div>
            }

            </div>
            <p class="row-consommee">@Messages("consumed")
                : @projet.chargeConsommee
                @if(projet.hasUniteJour()) {
                    @Messages("day-first-letter")
                } else {
                    @Messages("week-first-letter")
                }</p>
        </div>
        <div class="col-sm-5">
            <div class="row" style="padding-top: 10px ;">
                <div class="col-xs-9">
                </div>
                <div class="col-xs-3">
                    <a tabindex="0" class="btn btn-success btn-circle popover-info" role="button" data-container="body" data-toggle="popover" data-placement="bottom" data-html="true" data-trigger="focus" data-content='<p><div class="cercle cercle-indisponible"></div> @Messages("unavailable")</p><p><div class="cercle cercle-termine"></div> @Messages("completed")</p><p><div class="cercle cercle-retard"></div> @Messages("delayed")</p>'>
                        <i class="fa fa-info"></i>
                    </a>
                </div>
            </div>
            <div class="row" id="date-header">
                <h3 class="header-text">
                @if(projet.dateDebutTheorique != null) {
                    @Messages("theoreticalDate")
                    <table>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>
                                @Messages("fromDate") <div class="date-projet">@projet.formateDate(projet.dateDebutTheorique)</div>
                            </td>
                            <td style="padding-left: 3px ; padding-right: 3px ;">@Messages("untilDate")</td>
                            <td>
                                <div class="date-projet">@projet.formateDate(projet.dateFinTheorique)</div>
                            </td>
                        </tr>
                    </table>
                }
                @if(projet.dateFinReelTot != null) {
                    @Messages("effectiveDates")
                    <table>
                        <tr>
                            <td>
                                @Messages("fromDate") <div class="date-projet">@projet.formateDate(projet.dateDebutReel)</div>
                            </td>
                            <td style="padding-left: 3px ; padding-right: 3px ;">@Messages("untilDate")</td>
                            <td>
                                <div class="date-projet">@projet.formateDate(projet.dateFinReelTot)</div>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td>
                                <div class="date-projet">@projet.formateDate(projet.dateFinReelTard)</div>
                            </td>
                        </tr>
                    </table>
                }
                </h3>
            </div>
            <div class="row" style="margin-top: 14px ;">
                <div style="margin-top:14px ;">
                    <button onclick="activeModificationProjetDansProjet('@projet.id')" name="@projet.id" class="btn btn-info" type="button" style="padding: 3px 7px ; float: right ; border-radius: 0px 0 0 0 ; background-color: #1AB394"><i class="fa fa-pencil"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal-consulterClient-projet-@projet.id" role="dialog">
    <div class="modal-dialog modal-lg">
            <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">
                    ×</span> <span class="sr-only">Close</span></button>
                <div class="div-center">
                    <h3>@projet.client.nom</h3>
                    <h5>@projet.client.adresseClient</h5>
                    <div class="table-responsive table-responsive-client">
                        <table class="datatable-consulterClient table table-striped table-bordered table-hover">
                            <thead>
                                <tr class="table-center">
                                    <th style="vertical-align:middle ;">@Messages("formLastName")</th>
                                    <th style="vertical-align:middle ;">@Messages("formFirstName")</th>
                                    <th style="vertical-align:middle ;">@Messages("formEmail")</th>
                                    <th style="vertical-align:middle ;">@Messages("formTel")</th>
                                </tr>
                            </thead>
                            <tbody>
                            @for( contact <- projet.client.listContacts()) {
                                <tr class="table-center">
                                    <td style="vertical-align:middle ;">@contact.nom</td>
                                    <td style="vertical-align:middle ;">@contact.prenom</td>
                                    <td style="vertical-align:middle ;">@contact.email</td>
                                    <td style="vertical-align:middle ;">@contact.telephone</td>
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="div-modifierProjet-@projet.id" style="display: none ;">
    <form id="addProjectForm-projet-@projet.id" class="m-t" role="form" method="POST">
        <div class="wrapper wrapper-content">
            <div class="ibox fadeInRightBig" style="background-color: #FFF ; max-width: 100% ;">
                <div class="ibox-content" style="padding-top: 0 ; padding-right: 0 ;">
                    <div class="row">
                        <div class="col-md-offset-11 col-md-1" style="padding-right: 15px ; padding-left:0px ; text-align:center ;">
                            <div onclick="desactiveModificationProjetDansProjet('@projet.id')" name="@projet.id" class="cursor-pointer" style="border:none ; background-color:#E74C3C ; color:#FFF ;">@Messages("cancel") <i class="fa fa-times"></i></div>
                        </div>
                    </div>

                    <div id="successModifierProjet-@projet.id" class="alert alert-success alert-dismissable" style="display: none ;">
                        <button class="close" type="button">×</button>
                        <p id="successModifierProjetP-@projet.id"><p>
                    </div>
                    <div id="errorModifierProjet-@projet.id" class="alert alert-danger alert-dismissable" style="display: none ;">
                        <button class="close" type="button">×</button>
                        <p id="errorModifierProjetP-@projet.id"><p>
                    </div>

                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-8">
                            <label class="label_form" for="projet">@Messages("project")</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-8">
                            <div class="row">
                                <div class="col-sm-6">
                                    <input name="projet" value="@projet.nom" required="true" placeholder="" class="form-control"/>
                                </div>
                                <div class="col-sm-6">@Messages("priority")
                                    <div id="projet-modifier-btn-@projet.id" class="btn-group" style="display: inline-block ;">
                                    @if(projet.priorite == 1) {
                                        <button id="first-@projet.id" class="btn btn-active" type="button" value="1" >
                                            1</button>
                                        <button id="second-@projet.id" class="btn" value="2" type="button">
                                            2</button>
                                        <button id="third-@projet.id" class="btn" type="button" value="3">
                                            3</button>
                                    } else {
                                        @if(projet.priorite == 2) {
                                            <button id="first-@projet.id" class="btn" type="button" value="1" >
                                                1</button>
                                            <button id="second-@projet.id" class="btn btn-active" value="2" type="button">
                                                2</button>
                                            <button id="third-@projet.id" class="btn" type="button" value="3">
                                                3</button>
                                        } else {
                                            <button id="first-@projet.id" class="btn" type="button" value="1" >
                                                1</button>
                                            <button id="second-@projet.id" class="btn" value="2" type="button">
                                                2</button>
                                            <button id="third-@projet.id" class="btn btn-active" type="button" value="3">
                                                3</button>
                                        }
                                    }
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="label_form" for="responsableProjet">@Messages("projectPersonResponsible")</label>
                                        <div> @projet.responsableProjet.prenom @projet.responsableProjet.nom
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <div class='form-group'>
                                        <label class="label_form" for="client">@Messages("client")</label>
                                        <div> @projet.client.nom
                                                <!--
                                                                    <select id="client" name="client" required="true" style="width:100% ;" class="form-control">
                                                                        <option value="1">Option 1</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                        <option value="5">Option 5</option>
                                                                    </select>
                                                                    -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-6">
                                    <label for="description" class="label_form">@Messages("description")</label>
                                </div>

                                <div class="col-sm-12">
                                    <textarea name="description" style="height: 150px ; width:100% ;">@projet.description</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div onclick="modifierProjet(this); return false;" class="ibox-footer text-center" style="background-color: #27AE62 ; color:#FFF ; height: 40px ; text-align:center ;" form="addProjectForm-projet-@projet.id" value="@projet.id">
                    <h3>@Messages("saveProject")</h3>
                </div>
            </div>
        </div>
    </form>
</div>

<div style="margin-top: 30px ; padding-top:0px ;" class="row wrapper wrapper-content white-bg">
    <div style="margin:auto ;">
        <div class="panel-body">
            @if(projet.responsableProjet.id==utilisateur.id&&projet.avancementGlobal==0){

                <div class="row">
                <div class="switch" style="display:inline-block ; float:right ;">
                    <div class="onoffswitch">
                        <input class="onoffswitch-checkbox" id="checkbox-draft-projet-@projet.id" type="checkbox" onclick="changeModeDraftProjet(@projet.id)">
                        <label class="onoffswitch-label" for="checkbox-draft-projet-@projet.id">
                            <span class="onoffswitch-inner"></span>
                            <span class="onoffswitch-switch"></span>
                        </label>
                    </div>
                </div>
                <p style="display:inline-block ; margin-left:5px ; vertical-align:middle ; font-weight: bold ; float: right ; padding-right: 5px ;"> @Messages("draftMode")</p>
            </div>
            }
        <div class="row row-options-admin-projet">
                <div class="col-sm-3">
                    <div class="checkbox checkbox-success checkbox-circle">
                        <input id="checkbox-taches-terminees" type="checkbox">
                        <label for="checkbox-taches-terminees">
                        @Messages("completedTasks")
                        </label>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="checkbox checkbox-success checkbox-circle">
                        <input id="checkbox-taches-indisponibles" type="checkbox">
                        <label for="checkbox-taches-indisponibles">
                        @Messages("unavailableTasks")
                        </label>
                    </div>
                </div>
            </div>
            <div id="mode-draft" class="table-responsive" style="">
                <div class="nestable dd dd-nodrag" id="nestable-projet-@projet.id">
                    <ol class="dd-list">
                            <!-- En-tete -->
                        <li class="dd-item dd-item-min-width">
                            <div style="padding:0px ; background-color:#f5f5f5 ; border:1px solid #EBEBEB ; font-weight:bold ;">
                                <div class="row row-nestable dd-nodrag">
                                @if(projet.responsableProjet.equals(utilisateur)) {
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;">@Messages("task")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;">@Messages("responsible")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;">@Messages("client")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;">@Messages("startDate")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;">@Messages("endDate")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ; width:15.75% ;">@Messages("workload")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ; width:15.75% ;">@Messages("pert")</div>
                                    <div class="col-middle" style="width:2% ; border-right: 1px solid #EBEBEB ;"><i class="fa fa-bell"></i></div>
                                    <div class="col-middle" style="width:3% ;"><i class="fa fa-trash"></i></div>
                                } else {
                                    <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;">@Messages("task")</div>
                                    <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;">@Messages("responsible")</div>
                                    <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;">@Messages("client")</div>
                                    <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;">@Messages("startDate")</div>
                                    <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;">@Messages("endDate")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ; width:16.75% ;">@Messages("workload")</div>
                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ; width:16.75% ;">@Messages("pert")</div>
                                    <div class="col-middle" style="width:5% ;"><i class="fa fa-bell"></i></div>
                                }
                                </div>
                            </div>
                        </li>
                    </ol>
                    <ol class="dd-list" id="table_taches_@projet.id">
                    @if(projet.responsableProjet.equals(utilisateur)) {
                        @for( tacheMere <- projet.listTachesAAfficher()) {
                            <li class="dd-item dd-item-min-width" data-id="@tacheMere.id">
                                <div class="dd-handle" style="padding:0px ;">
                                    <div class="row row-nestable" >
                                        <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-nestable id-tache">
                                            @tacheMere.idTache
                                            </div>
                                            <div class="row row-nestable" style="padding-top: 10px ;">
                                            @tacheMere.nom
                                            </div>
                                        </div>
                                        <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">@tacheMere.responsableTache.prenom @tacheMere.responsableTache.nom </div>
                                        <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">@tacheMere.projet.client.nom</div>
                                        <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">@tacheMere.formateDate(tacheMere.dateDebut)</div>
                                        <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-nestable">@tacheMere.formateDate(tacheMere.dateFinTot)</div>
                                            <div class="row row-nestable">@tacheMere.formateDate(tacheMere.dateFinTard)</div>
                                        </div>
                                        <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-initiale row-nestable">@Messages("initial")
                                                : @tacheMere.chargeInitiale
                                                @if(projet.hasUniteJour()) {
                                                    @Messages("day-first-letter")
                                                } else {
                                                    @Messages("week-first-letter")
                                                }
                                            </div>
                                            <div class="row row-restante row-nestable">@Messages("remaining")
                                                : @tacheMere.chargeRestante
                                                @if(projet.hasUniteJour()) {
                                                    @Messages("day-first-letter")
                                                } else {
                                                    @Messages("week-first-letter")
                                                }
                                            </div>
                                            <div class="row progress progress-bar-default row-nestable">
                                            @if((math rint tacheMere.getAvancementTache()*100) == 0.0) {
                                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                    0%
                                                </div>
                                            } else {
                                                <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint tacheMere.getAvancementTache()*100)}" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint tacheMere.getAvancementTache()*100)}% ;">
                                                    @{(math rint tacheMere.getAvancementTache()*100)}
                                                    %
                                                </div>
                                            }
                                            </div>
                                            <div class="row row-consommee row-nestable">@Messages("consumed")
                                                : @tacheMere.chargeConsommee
                                                @if(projet.hasUniteJour()) {
                                                    @Messages("day-first-letter")
                                                } else {
                                                    @Messages("week-first-letter")
                                                }</div>
                                        </div>

                                        <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-nestable">@Messages("predecessor")
                                                :
                                                @if(tacheMere.hasPredecesseur()) {
                                                    @tacheMere.predecesseur.idTache
                                                } else {
                                                    @Messages("none")
                                                }
                                            </div>
                                            <div class="row row-nestable dd-nodrag">
                                                @Messages("successors") :
                                                @if(tacheMere.hasSuccesseur()) {
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                            @tacheMere.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-pert">
                                                        @for( successeur <- tacheMere.successeurs) {
                                                            <li>@successeur.idTache</li>
                                                        }
                                                        </ul>
                                                    </div>
                                                } else {
                                                    @Messages("none")
                                                }
                                            </div>
                                        </div>
                                        @if(utilisateur.hasActiverNotification(tacheMere)) {
                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@tacheMere.id', '@utilisateur.id')"><i id="notif-icon-tache-@tacheMere.id" class="fa fa-bell"></i></a></div>

                                        } else {
                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@tacheMere.id', '@utilisateur.id')"><i id="notif-icon-tache-@tacheMere.id" class="fa fa-bell-slash-o"></i></a></div>
                                        }
                                        @if(tacheMere.getAvancementTache() == 0){
                                            <div class="col-middle dd-nodrag td-btn-suppr" data-toggle="modal" onclick="afficherModalSupprimerTache(@tacheMere.id)" style="width:3% ;"><i class="fa fa-times"></i></div>

                                        }else{
                                            <div class="col-middle dd-nodrag td-btn-suppr-disable" data-toggle="modal" style="width:3% ;"><i class="fa fa-times"></i></div>
                                        }
                                    </div>
                                    <div class="row row-nestable dd-nodrag" style="text-align:center ;">
                                        <div class="col-xs-4 normal">
                                            <div class="normal boutonPlusCreerTache">
                                                <i class="fa fa-plus-circle" style="font-size:14px ;"></i>
                                            </div>
                                            <div class="createSubTask" data-toggle="modal" data-target="#modal-tache-creer" data="@tacheMere.id" projet="@projet.nom" client="@projet.client.nom">
                                                <i class="fa fa-arrow-right"> @Messages("createSubTask")</i>
                                            </div>
                                        </div>
                                        <div class="col-xs-4 normal createTaskHaut" data-toggle="modal" data-target="#modal-tache-creer" data="@tacheMere.id" projet="@projet.nom" client="@projet.client.nom">
                                            <i class="fa fa-arrow-up"> @Messages("createTask")</i>
                                        </div>
                                        <div class="col-xs-4 normal createTaskBas" style="border:none ;" data-toggle="modal" data-target="#modal-tache-creer" data="@tacheMere.id" projet="@projet.nom" client="@projet.client.nom">
                                            <i class="fa fa-arrow-down"> @Messages("createTask")</i>
                                        </div>
                                    </div>
                                </div>
                                @if(tacheMere.hasEnfant()) {
                                    <ol class="dd-list">
                                    @for( sousTache1 <- tacheMere.enfants()) {
                                        <li class="dd-item dd-item-min-width" data-id="@sousTache1.id">
                                            <div class="dd-handle" style="padding:0px ;">
                                                <div class="row row-nestable">
                                                    <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                        <div class="row row-nestable id-tache">
                                                        @sousTache1.idTache
                                                        </div>
                                                        <div class="row row-nestable" style="padding-top: 10px ;">
                                                        @sousTache1.nom
                                                        </div>
                                                    </div>
                                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">@sousTache1.responsableTache.prenom @sousTache1.responsableTache.nom </div>
                                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">@sousTache1.projet.client.nom</div>
                                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">@sousTache1.formateDate(sousTache1.dateDebut)</div>
                                                    <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                        <div class="row row-nestable">@sousTache1.formateDate(sousTache1.dateFinTot)</div>
                                                        <div class="row row-nestable">@sousTache1.formateDate(sousTache1.dateFinTard)</div>
                                                    </div>
                                                    <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                        <div class="row row-initiale row-nestable">@Messages("initial")
                                                            : @sousTache1.chargeInitiale
                                                            @if(projet.hasUniteJour()) {
                                                                @Messages("day-first-letter")
                                                            } else {
                                                                @Messages("week-first-letter")
                                                            }
                                                        </div>
                                                        <div class="row row-restante row-nestable">@Messages("remaining")
                                                            : @tacheMere.chargeRestante
                                                            @if(projet.hasUniteJour()) {
                                                                @Messages("day-first-letter")
                                                            } else {
                                                                @Messages("week-first-letter")
                                                            }
                                                        </div>
                                                        <div class="row progress progress-bar-default row-nestable">
                                                        @if((math rint sousTache1.getAvancementTache()*100) == 0.0) {
                                                            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                                0%
                                                            </div>
                                                        } else {
                                                            <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint sousTache1.getAvancementTache()*100) }" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint sousTache1.getAvancementTache()*100) }% ;">
                                                                @{(math rint sousTache1.getAvancementTache()*100) }
                                                                %
                                                            </div>
                                                        }
                                                        </div>
                                                        <div class="row row-consommee row-nestable">@Messages("consumed")
                                                            : @sousTache1.chargeConsommee
                                                            @if(projet.hasUniteJour()) {
                                                                @Messages("day-first-letter")
                                                            } else {
                                                                @Messages("week-first-letter")
                                                            }</div>
                                                    </div>

                                                    <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                        <div class="row row-nestable">@Messages("predecessor")
                                                            :
                                                            @if(sousTache1.hasPredecesseur()) {
                                                                @sousTache1.predecesseur.idTache
                                                            } else {
                                                                @Messages("none")
                                                            }
                                                        </div>
                                                        <div class="row row-nestable dd-nodrag">
                                                            @Messages("successors")
                                                            :
                                                            @if(sousTache1.hasSuccesseur()) {
                                                                <div class="btn-group">
                                                                    <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                                        @sousTache1.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                                    </button>
                                                                    <ul class="dropdown-menu dropdown-menu-pert">
                                                                    @for( successeur <- sousTache1.successeurs) {
                                                                        <li>@successeur.idTache</li>
                                                                    }
                                                                    </ul>
                                                                </div>
                                                            } else {
                                                                @Messages("none")
                                                            }
                                                        </div>
                                                    </div>
                                                    @if(utilisateur.hasActiverNotification(sousTache1)) {
                                                        <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache1.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache1.id" class="fa fa-bell"></i></a></div>

                                                    } else {
                                                        <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache1.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache1.id" class="fa fa-bell-slash-o"></i></a></div>
                                                    }
                                                    @if(sousTache1.getAvancementTache() == 0){
                                                        <div class="col-middle dd-nodrag td-btn-suppr" data-toggle="modal" onclick="afficherModalSupprimerTache(@sousTache1.id)" style="width:3% ;"><i class="fa fa-times"></i></div>

                                                    }else{
                                                        <div class="col-middle dd-nodrag td-btn-suppr-disable" data-toggle="modal" style="width:3% ;"><i class="fa fa-times"></i></div>
                                                    }
                                                </div>
                                                <div class="row row-nestable dd-nodrag" style="text-align:center ;">
                                                    <div class="col-xs-4 normal">
                                                        <div class="normal boutonPlusCreerTache">
                                                            <i class="fa fa-plus-circle" style="font-size:14px ;"></i>
                                                        </div>
                                                        <div class="createSubTask" data-target="#modal-tache-creer" data="@sousTache1.id">
                                                            <i class="fa fa-arrow-right"> @Messages("createSubTask")</i>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-4 normal createTaskHaut" data-target="#modal-tache-creer" data="@sousTache1.id">
                                                        <i class="fa fa-arrow-up"> @Messages("createTask")</i>
                                                    </div>
                                                    <div class="col-xs-4 normal createTaskBas" style="border:none ;" data-target="#modal-tache-creer" data="@sousTache1.id">
                                                        <i class="fa fa-arrow-down"> @Messages("createTask")</i>
                                                    </div>
                                                </div>
                                            </div>

                                            @if(sousTache1.hasEnfant()) {
                                                <ol class="dd-list">
                                                @for( sousTache2 <- sousTache1.enfants()) {
                                                    <li class="dd-item dd-item-min-width" data-id="@sousTache2.id">
                                                        <div class="dd-handle" style="padding:0px ;">
                                                            <div class="row row-nestable" >
                                                                <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                    <div class="row row-nestable id-tache">
                                                                    @sousTache2.idTache
                                                                    </div>
                                                                    <div class="row row-nestable" style="padding-top: 10px ;">
                                                                    @sousTache2.nom
                                                                    </div>
                                                                </div>
                                                                <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">@sousTache2.responsableTache.prenom @sousTache2.responsableTache.nom </div>
                                                                <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">@sousTache2.projet.client.nom</div>
                                                                <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">@sousTache2.formateDate(sousTache2.dateDebut)</div>
                                                                <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                    <div class="row row-nestable">@sousTache2.formateDate(sousTache2.dateFinTot)</div>
                                                                    <div class="row row-nestable">@sousTache2.formateDate(sousTache2.dateFinTard)</div>
                                                                </div>
                                                                <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                    <div class="row row-initiale row-nestable">@Messages("initial")
                                                                        : @sousTache2.chargeInitiale
                                                                        @if(projet.hasUniteJour()) {
                                                                            @Messages("day-first-letter")
                                                                        } else {
                                                                            @Messages("week-first-letter")
                                                                        }
                                                                    </div>
                                                                    <div class="row row-restante row-nestable">@Messages("remaining")
                                                                        : @tacheMere.chargeRestante
                                                                        @if(projet.hasUniteJour()) {
                                                                            @Messages("day-first-letter")
                                                                        } else {
                                                                            @Messages("week-first-letter")
                                                                        }
                                                                    </div>
                                                                    <div class="row progress progress-bar-default row-nestable">
                                                                    @if((math rint sousTache2.getAvancementTache()*100)  == 0.0) {
                                                                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                                            0%
                                                                        </div>
                                                                    } else {
                                                                        <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint sousTache2.getAvancementTache()*100) }" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint sousTache2.getAvancementTache()*100) }% ;">
                                                                            @{(math rint sousTache2.getAvancementTache()*100) }
                                                                            %
                                                                        </div>
                                                                    }
                                                                    </div>
                                                                    <div class="row row-consommee row-nestable">@Messages("consumed")
                                                                        : @sousTache2.chargeConsommee
                                                                        @if(projet.hasUniteJour()) {
                                                                            @Messages("day-first-letter")
                                                                        } else {
                                                                            @Messages("week-first-letter")
                                                                        }</div>
                                                                </div>

                                                                <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                    <div class="row row-nestable">@Messages("predecessor")
                                                                        :
                                                                        @if(sousTache2.hasPredecesseur()) {
                                                                            @sousTache2.predecesseur.idTache
                                                                        } else {
                                                                            @Messages("none")
                                                                        }
                                                                    </div>
                                                                    <div class="row row-nestable dd-nodrag">
                                                                        @Messages("successors")
                                                                        :
                                                                        @if(sousTache2.hasSuccesseur()) {
                                                                            <div class="btn-group">
                                                                                <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                                                    @sousTache2.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                                                </button>
                                                                                <ul class="dropdown-menu dropdown-menu-pert">
                                                                                @for( successeur <- sousTache2.successeurs) {
                                                                                    <li>@successeur.idTache</li>
                                                                                }
                                                                                </ul>
                                                                            </div>
                                                                        } else {
                                                                            @Messages("none")
                                                                        }
                                                                    </div>
                                                                </div>
                                                                @if(utilisateur.hasActiverNotification(sousTache2)) {
                                                                    <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache2.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache2.id" class="fa fa-bell"></i></a></div>

                                                                } else {
                                                                    <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache2.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache2.id" class="fa fa-bell-slash-o"></i></a></div>
                                                                }
                                                                @if(sousTache2.getAvancementTache() == 0){
                                                                    <div class="col-middle dd-nodrag td-btn-suppr" data-toggle="modal" onclick="afficherModalSupprimerTache(@sousTache2.id)" style="width:3% ;"><i class="fa fa-times"></i></div>

                                                                }else{
                                                                    <div class="col-middle dd-nodrag td-btn-suppr-disable" data-toggle="modal" style="width:3% ;"><i class="fa fa-times"></i></div>
                                                                }
                                                            </div>
                                                            <div class="row row-nestable dd-nodrag" style="text-align:center ;">
                                                                <div class="col-xs-4 normal">
                                                                    <div class="normal boutonPlusCreerTache">
                                                                        <i class="fa fa-plus-circle" style="font-size:14px ;"></i>
                                                                    </div>
                                                                    <div class="createSubTask" data-toggle="modal" data-target="#modal-tache-creer" data="@sousTache2.id">
                                                                        <i class="fa fa-arrow-right"> @Messages("createSubTask")</i>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-4 normal createTaskHaut" data-toggle="modal" data-target="#modal-tache-creer" data="@sousTache2.id">
                                                                    <i class="fa fa-arrow-up "> @Messages("createTask")</i>
                                                                </div>
                                                                <div class="col-xs-4 normal createTaskBas" style="border:none ;" data-toggle="modal" data-target="#modal-tache-creer" data="@sousTache2.id">
                                                                    <i class="fa fa-arrow-down"> @Messages("createTask")</i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if(sousTache2.hasEnfant()) {
                                                            <ol class="dd-list">
                                                            @for( sousTache3 <- sousTache2.enfants()) {
                                                                <li class="dd-item dd-item-min-width" data-id="@sousTache3.id">
                                                                    <div class="dd-handle" style="padding:0px ;">
                                                                        <div class="row row-nestable">
                                                                            <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                <div class="row row-nestable id-tache">
                                                                                @sousTache3.idTache
                                                                                </div>
                                                                                <div class="row row-nestable" style="padding-top: 10px ;">
                                                                                @sousTache3.nom
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">@sousTache3.responsableTache.prenom @sousTache3.responsableTache.nom </div>
                                                                            <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">@sousTache3.projet.client.nom</div>
                                                                            <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">@sousTache3.formateDate(sousTache3.dateDebut)</div>
                                                                            <div class="col-middle" style="border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                <div class="row row-nestable">@sousTache3.formateDate(sousTache3.dateFinTot)</div>
                                                                                <div class="row row-nestable">@sousTache3.formateDate(sousTache3.dateFinTard)</div>
                                                                            </div>
                                                                            <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                <div class="row row-initiale row-nestable">@Messages("initial")
                                                                                    : @sousTache3.chargeInitiale
                                                                                    @if(projet.hasUniteJour()) {
                                                                                        @Messages("day-first-letter")
                                                                                    } else {
                                                                                        @Messages("week-first-letter")
                                                                                    }
                                                                                </div>
                                                                                <div class="row row-restante row-nestable">@Messages("remaining")
                                                                                    : @tacheMere.chargeRestante
                                                                                    @if(projet.hasUniteJour()) {
                                                                                        @Messages("day-first-letter")
                                                                                    } else {
                                                                                        @Messages("week-first-letter")
                                                                                    }
                                                                                </div>
                                                                                <div class="row progress progress-bar-default row-nestable">
                                                                                @if((math rint sousTache3.getAvancementTache()*100) == 0.0) {
                                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                                                        0%
                                                                                    </div>
                                                                                } else {
                                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint sousTache3.getAvancementTache()*100) }" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint sousTache3.getAvancementTache()*100) }% ;">
                                                                                        @{(math rint sousTache3.getAvancementTache()*100) }
                                                                                        %
                                                                                    </div>
                                                                                }
                                                                                </div>
                                                                                <div class="row row-consommee row-nestable">@Messages("consumed")
                                                                                    : @sousTache3.chargeConsommee
                                                                                    @if(projet.hasUniteJour()) {
                                                                                        @Messages("day-first-letter")
                                                                                    } else {
                                                                                        @Messages("week-first-letter")
                                                                                    }</div>
                                                                            </div>

                                                                            <div class="col-middle" style="width:15.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                <div class="row row-nestable">@Messages("predecessor")
                                                                                    :
                                                                                    @if(sousTache3.hasPredecesseur()) {
                                                                                        @sousTache3.predecesseur.idTache
                                                                                    } else {
                                                                                        @Messages("none")
                                                                                    }
                                                                                </div>
                                                                                <div class="row row-nestable dd-nodrag">
                                                                                    @Messages("successors")
                                                                                    :
                                                                                    @if(sousTache3.hasSuccesseur()) {
                                                                                        <div class="btn-group">
                                                                                            <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                                                                @sousTache3.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                                                            </button>
                                                                                            <ul class="dropdown-menu dropdown-menu-pert">
                                                                                            @for( successeur <- sousTache3.successeurs) {
                                                                                                <li>@successeur.idTache</li>
                                                                                            }
                                                                                            </ul>
                                                                                        </div>
                                                                                    } else {
                                                                                        @Messages("none")
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            @if(utilisateur.hasActiverNotification(sousTache3)) {
                                                                                <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache3.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache3.id" class="fa fa-bell"></i></a></div>

                                                                            } else {
                                                                                <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache3.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache3.id" class="fa fa-bell-slash-o"></i></a></div>
                                                                            }
                                                                            @if(sousTache3.getAvancementTache() == 0){
                                                                                <div class="col-middle dd-nodrag td-btn-suppr" data-toggle="modal" onclick="afficherModalSupprimerTache(@sousTache3.id)" style="width:3% ;"><i class="fa fa-times"></i></div>

                                                                            }else{
                                                                                <div class="col-middle dd-nodrag td-btn-suppr-disable" data-toggle="modal" style="width:3% ;"><i class="fa fa-times"></i></div>
                                                                            }
                                                                        </div>
                                                                        <div class="row row-nestable dd-nodrag" style="text-align:center ;">
                                                                            <div class="col-xs-4 normal">
                                                                                <div class="normal boutonPlusCreerTache">
                                                                                    <i class="fa fa-plus-circle" style="font-size:14px ;"></i>
                                                                                </div>
                                                                                <div class="createSubTask" data-toggle="modal" data-target="#modal-tache-creer" data="@sousTache3.id">
                                                                                    <i class="fa fa-arrow-right"> @Messages("createSubTask")</i>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-xs-4 normal createTaskHaut" data-toggle="modal" data-target="#modal-tache-creer" data="@sousTache3.id">
                                                                                <i class="fa fa-arrow-up"> @Messages("createTask")</i>
                                                                            </div>
                                                                            <div class="col-xs-4 normal createTaskBas" style="border:none ;" data-toggle="modal" data-target="#modal-tache-creer" data="@sousTache3.id">
                                                                                <i class="fa fa-arrow-down"> @Messages("createTask")</i>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </li>
                                                            }
                                                            </ol>
                                                        }

                                                    </li>
                                                }
                                                </ol>
                                            }
                                        </li>
                                    }
                                    </ol>
                                }
                            </li>

                        }
                    } else {
                        @for( tacheMere <- utilisateur.listTachesDansProjetNonResponsableAAfficher(projet)) {
                            <li class="dd-item dd-item-min-width" data-id="@tacheMere.id">
                                <div class="dd-handle" style="padding:0px ;">
                                    <div class="row row-nestable">
                                        <div class="col-middle first-col-middle" style="">
                                            <div class="row row-nestable id-tache">
                                            @tacheMere.idTache
                                            </div>
                                            <div class="row row-nestable" style="padding-top: 10px ;">
                                            @tacheMere.nom
                                            </div>
                                        </div>
                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">@tacheMere.responsableTache.prenom @tacheMere.responsableTache.nom </div>
                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">@tacheMere.projet.client.nom</div>
                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">@tacheMere.formateDate(tacheMere.dateDebut)</div>
                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-nestable">@tacheMere.formateDate(tacheMere.dateFinTot)</div>
                                            <div class="row row-nestable">@tacheMere.formateDate(tacheMere.dateFinTard)</div>
                                        </div>
                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-initiale row-nestable">@Messages("initial")
                                                : @tacheMere.chargeInitiale
                                                @if(projet.hasUniteJour()) {
                                                    @Messages("day-first-letter")
                                                } else {
                                                    @Messages("week-first-letter")
                                                }
                                            </div>
                                            <div class="row row-restante row-nestable">@Messages("remaining")
                                                : @tacheMere.chargeRestante
                                                @if(projet.hasUniteJour()) {
                                                    @Messages("day-first-letter")
                                                } else {
                                                    @Messages("week-first-letter")
                                                }
                                            </div>
                                            <div class="row progress progress-bar-default row-nestable">
                                            @if((math rint tacheMere.getAvancementTache()*100) == 0.0) {
                                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                    0%
                                                </div>
                                            } else {
                                                <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint tacheMere.getAvancementTache()*100) }" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint tacheMere.getAvancementTache()*100) }% ;">
                                                    @{(math rint tacheMere.getAvancementTache()*100) }
                                                    %
                                                </div>
                                            }
                                            </div>
                                            <div class="row row-consommee row-nestable">@Messages("consumed")
                                                : @tacheMere.chargeConsommee
                                                @if(projet.hasUniteJour()) {
                                                    @Messages("day-first-letter")
                                                } else {
                                                    @Messages("week-first-letter")
                                                }</div>
                                        </div>

                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@tacheMere.id" onclick="afficherModalTache(this)">
                                            <div class="row row-nestable">@Messages("predecessor")
                                                :
                                                @if(tacheMere.hasPredecesseur()) {
                                                    @tacheMere.predecesseur.idTache
                                                } else {
                                                    @Messages("none")
                                                }
                                            </div>
                                            <div class="row row-nestable dd-nodrag">
                                                @Messages("successors") :
                                                @if(tacheMere.hasSuccesseur()) {
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                            @tacheMere.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-pert">
                                                        @for( successeur <- tacheMere.successeurs) {
                                                            <li>@successeur.idTache</li>
                                                        }
                                                        </ul>
                                                    </div>
                                                } else {
                                                    @Messages("none")
                                                }
                                            </div>
                                        </div>
                                        @if(utilisateur.hasActiverNotification(tacheMere)) {
                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@tacheMere.id', '@utilisateur.id')"><i id="notif-icon-tache-@tacheMere.id" class="fa fa-bell"></i></a></div>

                                        } else {
                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@tacheMere.id', '@utilisateur.id')"><i id="notif-icon-tache-@tacheMere.id" class="fa fa-bell-slash-o"></i></a></div>
                                        }
                                    </div>
                                </div>
                                @if(tacheMere.hasEnfant() && utilisateur.enfantIsPresent(tacheMere.enfants(), utilisateur.listTachesDansProjetNonResponsable(projet))) {
                                    <ol class="dd-list">
                                    @for( sousTache1 <- tacheMere.enfants()) {
                                        @if(utilisateur.listTachesDansProjetNonResponsable(projet).contains(sousTache1)) {
                                            <li class="dd-item dd-item-min-width" data-id="@sousTache1.id">
                                                <div class="dd-handle" style="padding:0px ;">
                                                    <div class="row row-nestable">
                                                        <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                            <div class="row row-nestable id-tache">
                                                            @sousTache1.idTache
                                                            </div>
                                                            <div class="row row-nestable" style="padding-top: 10px ;">
                                                            @sousTache1.nom
                                                            </div>
                                                        </div>
                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">@sousTache1.responsableTache.prenom @sousTache1.responsableTache.nom </div>
                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">@sousTache1.projet.client.nom</div>
                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">@sousTache1.formateDate(sousTache1.dateDebut)</div>
                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                            <div class="row row-nestable">@sousTache1.formateDate(sousTache1.dateFinTot)</div>
                                                            <div class="row row-nestable">@sousTache1.formateDate(sousTache1.dateFinTard)</div>
                                                        </div>
                                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                            <div class="row row-initiale row-nestable">@Messages("initial")
                                                                : @sousTache1.chargeInitiale
                                                                @if(projet.hasUniteJour()) {
                                                                    @Messages("day-first-letter")
                                                                } else {
                                                                    @Messages("week-first-letter")
                                                                }
                                                            </div>
                                                            <div class="row row-restante row-nestable">@Messages("remaining")
                                                                : @tacheMere.chargeRestante
                                                                @if(projet.hasUniteJour()) {
                                                                    @Messages("day-first-letter")
                                                                } else {
                                                                    @Messages("week-first-letter")
                                                                }
                                                            </div>
                                                            <div class="row progress progress-bar-default row-nestable">
                                                            @if((math rint sousTache1.getAvancementTache()*100) == 0.0) {
                                                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                                    0%
                                                                </div>
                                                            } else {
                                                                <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint sousTache1.getAvancementTache()*100)}" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint sousTache1.getAvancementTache()*100)}% ;">
                                                                    @{(math rint sousTache1.getAvancementTache()*100)}
                                                                    %
                                                                </div>
                                                            }
                                                            </div>
                                                            <div class="row row-consommee row-nestable">@Messages("consumed")
                                                                : @sousTache1.chargeConsommee
                                                                @if(projet.hasUniteJour()) {
                                                                    @Messages("day-first-letter")
                                                                } else {
                                                                    @Messages("week-first-letter")
                                                                }</div>
                                                        </div>

                                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache1.id" onclick="afficherModalTache(this)">
                                                            <div class="row row-nestable">@Messages("predecessor")
                                                                :
                                                                @if(sousTache1.hasPredecesseur()) {
                                                                    @sousTache1.predecesseur.idTache
                                                                } else {
                                                                    @Messages("none")
                                                                }
                                                            </div>
                                                            <div class="row row-nestable dd-nodrag">
                                                                @Messages("successors")
                                                                :
                                                                @if(sousTache1.hasSuccesseur()) {
                                                                    <div class="btn-group">
                                                                        <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                                            @sousTache1.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                                        </button>
                                                                        <ul class="dropdown-menu dropdown-menu-pert">
                                                                        @for( successeur <- sousTache1.successeurs) {
                                                                            <li>@successeur.idTache</li>
                                                                        }
                                                                        </ul>
                                                                    </div>
                                                                } else {
                                                                    @Messages("none")
                                                                }
                                                            </div>
                                                        </div>
                                                        @if(utilisateur.hasActiverNotification(sousTache1)) {
                                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache1.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache1.id" class="fa fa-bell"></i></a></div>

                                                        } else {
                                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache1.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache1.id" class="fa fa-bell-slash-o"></i></a></div>
                                                        }
                                                    </div>
                                                </div>

                                                @if(sousTache1.hasEnfant() && utilisateur.enfantIsPresent(sousTache1.enfants(), utilisateur.listTachesDansProjetNonResponsable(projet))) {
                                                    <ol class="dd-list">
                                                    @for( sousTache2 <- sousTache1.enfants()) {
                                                        @if(utilisateur.listTachesDansProjetNonResponsable(projet).contains(sousTache2)) {
                                                            <li class="dd-item dd-item-min-width" data-id="@sousTache2.id">
                                                                <div class="dd-handle" style="padding:0px ;">
                                                                    <div class="row row-nestable">
                                                                        <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                            <div class="row row-nestable id-tache">
                                                                            @sousTache2.idTache
                                                                            </div>
                                                                            <div class="row row-nestable" style="padding-top: 10px ;">
                                                                            @sousTache2.nom
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">@sousTache2.responsableTache.prenom @sousTache2.responsableTache.nom </div>
                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">@sousTache2.projet.client.nom</div>
                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">@sousTache2.formateDate(sousTache2.dateDebut)</div>
                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                            <div class="row row-nestable">@sousTache2.formateDate(sousTache2.dateFinTot)</div>
                                                                            <div class="row row-nestable">@sousTache2.formateDate(sousTache2.dateFinTard)</div>
                                                                        </div>
                                                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                            <div class="row row-initiale row-nestable">@Messages("initial")
                                                                                : @sousTache2.chargeInitiale
                                                                                @if(projet.hasUniteJour()) {
                                                                                    @Messages("day-first-letter")
                                                                                } else {
                                                                                    @Messages("week-first-letter")
                                                                                }
                                                                            </div>
                                                                            <div class="row row-restante row-nestable">@Messages("remaining")
                                                                                : @tacheMere.chargeRestante
                                                                                @if(projet.hasUniteJour()) {
                                                                                    @Messages("day-first-letter")
                                                                                } else {
                                                                                    @Messages("week-first-letter")
                                                                                }
                                                                            </div>
                                                                            <div class="row progress progress-bar-default row-nestable">
                                                                            @if((math rint sousTache2.getAvancementTache()*100) == 0.0) {
                                                                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                                                    0%
                                                                                </div>
                                                                            } else {
                                                                                <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint sousTache2.getAvancementTache()*100)}" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint sousTache2.getAvancementTache()*100)}% ;">
                                                                                    @{(math rint sousTache2.getAvancementTache()*100)}
                                                                                    %
                                                                                </div>
                                                                            }
                                                                            </div>
                                                                            <div class="row row-consommee row-nestable">@Messages("consumed")
                                                                                : @sousTache2.chargeConsommee
                                                                                @if(projet.hasUniteJour()) {
                                                                                    @Messages("day-first-letter")
                                                                                } else {
                                                                                    @Messages("week-first-letter")
                                                                                }</div>
                                                                        </div>

                                                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache2.id" onclick="afficherModalTache(this)">
                                                                            <div class="row row-nestable">@Messages("predecessor")
                                                                                :
                                                                                @if(sousTache2.hasPredecesseur()) {
                                                                                    @sousTache2.predecesseur.idTache
                                                                                } else {
                                                                                    @Messages("none")
                                                                                }
                                                                            </div>
                                                                            <div class="row row-nestable dd-nodrag">
                                                                                @Messages("successors")
                                                                                :
                                                                                @if(sousTache2.hasSuccesseur()) {
                                                                                    <div class="btn-group">
                                                                                        <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                                                            @sousTache2.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                                                        </button>
                                                                                        <ul class="dropdown-menu dropdown-menu-pert">
                                                                                        @for( successeur <- sousTache2.successeurs) {
                                                                                            <li>@successeur.idTache</li>
                                                                                        }
                                                                                        </ul>
                                                                                    </div>
                                                                                } else {
                                                                                    @Messages("none")
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                        @if(utilisateur.hasActiverNotification(sousTache2)) {
                                                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache2.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache2.id" class="fa fa-bell"></i></a></div>

                                                                        } else {
                                                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache2.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache2.id" class="fa fa-bell-slash-o"></i></a></div>
                                                                        }
                                                                    </div>
                                                                </div>
                                                                @if(sousTache2.hasEnfant() && utilisateur.enfantIsPresent(sousTache2.enfants(), utilisateur.listTachesDansProjetNonResponsable(projet))) {
                                                                    <ol class="dd-list">
                                                                    @for( sousTache3 <- sousTache2.enfants()) {
                                                                        @if(utilisateur.listTachesDansProjetNonResponsable(projet).contains(sousTache3)) {
                                                                            <li class="dd-item dd-item-min-width" data-id="@sousTache3.id" value="@sousTache2.id">
                                                                                <div class="dd-handle" style="padding:0px ;">
                                                                                    <div class="row row-nestable">
                                                                                        <div class="col-middle first-col-middle" style="" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                            <div class="row row-nestable id-tache">
                                                                                            @sousTache3.idTache
                                                                                            </div>
                                                                                            <div class="row row-nestable" style="padding-top: 10px ;">
                                                                                            @sousTache3.nom
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">@sousTache3.responsableTache.prenom @sousTache3.responsableTache.nom </div>
                                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">@sousTache3.projet.client.nom</div>
                                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">@sousTache3.formateDate(sousTache3.dateDebut)</div>
                                                                                        <div class="col-middle" style="width:13.5% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                            <div class="row row-nestable">@sousTache3.formateDate(sousTache3.dateFinTot)</div>
                                                                                            <div class="row row-nestable">@sousTache3.formateDate(sousTache3.dateFinTard)</div>
                                                                                        </div>
                                                                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                            <div class="row row-initiale row-nestable">@Messages("initial")
                                                                                                : @sousTache3.chargeInitiale
                                                                                                @if(projet.hasUniteJour()) {
                                                                                                    @Messages("day-first-letter")
                                                                                                } else {
                                                                                                    @Messages("week-first-letter")
                                                                                                }
                                                                                            </div>
                                                                                            <div class="row row-restante row-nestable">@Messages("remaining")
                                                                                                : @tacheMere.chargeRestante
                                                                                                @if(projet.hasUniteJour()) {
                                                                                                    @Messages("day-first-letter")
                                                                                                } else {
                                                                                                    @Messages("week-first-letter")
                                                                                                }
                                                                                            </div>
                                                                                            <div class="row progress progress-bar-default row-nestable">
                                                                                            @if((math rint sousTache2.getAvancementTache()*100) == 0.0) {
                                                                                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0% ; color:black ;">
                                                                                                    0%
                                                                                                </div>
                                                                                            } else {
                                                                                                <div class="progress-bar" role="progressbar" aria-valuenow="@{(math rint sousTache2.getAvancementTache()*100)}" aria-valuemin="0" aria-valuemax="100" style="width: @{(math rint sousTache2.getAvancementTache()*100)}% ;">
                                                                                                    @{(math rint sousTache2.getAvancementTache()*100)}
                                                                                                    %
                                                                                                </div>
                                                                                            }
                                                                                            </div>
                                                                                            <div class="row row-consommee row-nestable">@Messages("consumed")
                                                                                                : @sousTache3.chargeConsommee
                                                                                                @if(projet.hasUniteJour()) {
                                                                                                    @Messages("day-first-letter")
                                                                                                } else {
                                                                                                    @Messages("week-first-letter")
                                                                                                }</div>
                                                                                        </div>

                                                                                        <div class="col-middle" style="width:16.75% ; border-right: 1px solid #EBEBEB ;" data-toggle="modal" data-target="#modal-tache" value="@sousTache3.id" onclick="afficherModalTache(this)">
                                                                                            <div class="row row-nestable">@Messages("predecessor")
                                                                                                :
                                                                                                @if(sousTache3.hasPredecesseur()) {
                                                                                                    @sousTache3.predecesseur.idTache
                                                                                                } else {
                                                                                                    @Messages("none")
                                                                                                }
                                                                                            </div>
                                                                                            <div class="row row-nestable dd-nodrag">
                                                                                                @Messages("successors")
                                                                                                :
                                                                                                @if(sousTache3.hasSuccesseur()) {
                                                                                                    <div class="btn-group">
                                                                                                        <button type="button" class="btn btn-default dropdown-toggle dropdown-pert" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color:white ; color:#676A6C ;">
                                                                                                            @sousTache3.successeurs.size() @Messages("tasks") <span class="caret"></span>
                                                                                                        </button>
                                                                                                        <ul class="dropdown-menu dropdown-menu-pert">
                                                                                                        @for( successeur <- sousTache3.successeurs) {
                                                                                                            <li>@successeur.idTache</li>
                                                                                                        }
                                                                                                        </ul>
                                                                                                    </div>
                                                                                                } else {
                                                                                                    @Messages("none")
                                                                                                }
                                                                                            </div>
                                                                                        </div>
                                                                                        @if(utilisateur.hasActiverNotification(sousTache3)) {
                                                                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache3.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache3.id" class="fa fa-bell"></i></a></div>

                                                                                        } else {
                                                                                            <div class="col-middle dd-nodrag" style="width:2% ; border-right: 1px solid #EBEBEB ;"><a onclick="activerOuDesactiverNotification('@sousTache3.id', '@utilisateur.id')"><i id="notif-icon-tache-@sousTache3.id" class="fa fa-bell-slash-o"></i></a></div>
                                                                                        }
                                                                                    </div>
                                                                                </div>

                                                                            </li>
                                                                        }
                                                                    }
                                                                    </ol>
                                                                }

                                                            </li>
                                                        }

                                                    }
                                                    </ol>
                                                }
                                            </li>
                                        }
                                    }
                                    </ol>
                                }
                            </li>

                        }
                    }

                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="ibox-footer text-center cursor-pointer" style="background-color: #27AE62 ; color:#FFF ; height: 40px ;" data-toggle="modal" data-target="#modal-add-projet">
    <h3 style="margin:0px ;"><i class="fa fa-plus-circle" style="margin-right:7px ;"></i> @Messages("addProject")</h3>
</div>

<div class="modal fade" id="modal-draft-projet" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">Erreur de cohrence du projet!</h4>
            </div>
            <div class="modal-body">
                <p style="display:inline ;">@Messages("nonCoherentProject")</p>

                <p id="recapitulative-des-erreurs-projet-draft" style="display:inline ;"></p>

            </div>
            <div class="modal-footer" style="text-align: center;">
                <!--<button type="button" onclick="supprimerClient()" class="btn btn-admin" data-dismiss="modal">@Messages("yes")</button>-->
                <button type="button" onclick="$('#modal-draft-projet').modal('hide')" class="btn" data-dismiss="modal">ok</button>
            </div>
        </div>
    </div>
</div>