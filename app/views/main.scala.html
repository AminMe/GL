@(pageTitle: String, content: Html, scripts: Html)

<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>@pageTitle</title>

        <link href="/css/bootstrap.min.css" rel="stylesheet">
        <link href="/font-awesome/css/font-awesome.css" rel="stylesheet">
        <link href="/css/plugins/toastr/toastr.min.css" rel="stylesheet">
        <link href="/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">
        <link href="/css/animate.css" rel="stylesheet">

        <link href="/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
        <link href="/css/plugins/dataTables/dataTables.responsive.css" rel="stylesheet">
        <link href="/css/plugins/dataTables/dataTables.tableTools.min.css" rel="stylesheet">

        <link href="/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
        <link href="/css/plugins/footable/footable.core.css" rel="stylesheet">
        <link href="/css/plugins/chosen/chosen.css" rel="stylesheet">
        <link href="/css/plugins/iCheck/custom.css" rel="stylesheet">
        <link href="/css/plugins/colorpicker/bootstrap-colorpicker.min.css" rel="stylesheet">
        <link href="/css/plugins/cropper/cropper.min.css" rel="stylesheet">
        <link href="/css/plugins/switchery/switchery.css" rel="stylesheet">
        <link href="/css/plugins/jasny/jasny-bootstrap.min.css" rel="stylesheet">
        <link href="/css/plugins/nouslider/jquery.nouislider.css" rel="stylesheet">
        <link href="/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
        <link href="/css/plugins/ionRangeSlider/ion.rangeSlider.css" rel="stylesheet">
        <link href="/css/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css" rel="stylesheet">
        <link href="/css/plugins/clockpicker/clockpicker.css" rel="stylesheet">
        <link href="/css/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet">
        <link href="/css/plugins/select2/select2.min.css" rel="stylesheet">
        <link href="/css/style.css" rel="stylesheet">

    </head>

    <body class="md-skin fixed-sidebar fixed-nav pace-done">
            <!--########### Start - Main HTML Content  ########### -->

        @content

            <!--########### End  - Main HTML Content  ########### -->


            <!-- Mainly scripts -->
        <script src="/assets/js/jquery-2.1.1.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>

        <script src="/assets/js/plugins/metisMenu/jquery.metisMenu.js"></script>
        <script src="/assets/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

            <!-- Flot -->
        <script src="/assets/js/plugins/flot/jquery.flot.js"></script>
        <script src="/assets/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
        <script src="/assets/js/plugins/flot/jquery.flot.spline.js"></script>
        <script src="/assets/js/plugins/flot/jquery.flot.resize.js"></script>
        <script src="/assets/js/plugins/flot/jquery.flot.pie.js"></script>

            <!-- Peity -->
        <script src="/assets/js/plugins/peity/jquery.peity.min.js"></script>
        <script src="/assets/js/demo/peity-demo.js"></script>

            <!-- Custom and plugin javascript -->
        <script src="/assets/js/inspinia.js"></script>
        <script src="/assets/js/plugins/pace/pace.min.js"></script>

            <!-- jQuery UI -->
        <script src="/assets/js/plugins/jquery-ui/jquery-ui.min.js"></script>

            <!-- GITTER -->
        <script src="/assets/js/plugins/gritter/jquery.gritter.min.js"></script>

            <!-- Sparkline -->
        <script src="/assets/js/plugins/sparkline/jquery.sparkline.min.js"></script>

            <!-- Sparkline demo data  -->
        <script src="/assets/js/demo/sparkline-demo.js"></script>

            <!-- ChartJS-->
        <script src="/assets/js/plugins/chartJs/Chart.min.js"></script>

            <!-- Toastr -->
        <script src="/assets/js/plugins/toastr/toastr.min.js"></script>

            <!-- Data Tables -->
        <script src="/js/plugins/jeditable/jquery.jeditable.js"></script>
        <script src="/js/plugins/dataTables/jquery.dataTables.js"></script>
        <script src="/js/plugins/dataTables/dataTables.bootstrap.js"></script>
        <script src="/js/plugins/dataTables/dataTables.responsive.js"></script>
        <script src="/js/plugins/dataTables/dataTables.tableTools.min.js"></script>

            <!-- Footable -->
        <script src="/js/plugins/footable/footable.all.min.js"></script>

            <!-- DATE -->
        <script src="/assets/js/plugins/datapicker/bootstrap-datepicker.js"></script>
        <script src="/assets/js/plugins/datepicker/bootstrap-datepicker.js"></script>
        <script src="/assets/js/plugins/datepicker/locales/bootstrap-datepicker.en.js"></script>
        <script src="/assets/js/plugins/datepicker/locales/bootstrap-datepicker.fr.js"></script>

            <!-- Chosen -->
        <script src="/js/plugins/chosen/chosen.jquery.js"></script>
            <!-- Exposing play framework routes -->
        <script type="text/javascript" src="@routes.Application.javascriptRoutes()"></script>

            <!-- JSKnob -->
        <script src="/js/plugins/jsKnob/jquery.knob.js"></script>

            <!-- Input Mask-->
        <script src="/js/plugins/jasny/jasny-bootstrap.min.js"></script>

            <!-- Data picker -->
        <script src="/js/plugins/datapicker/bootstrap-datepicker.js"></script>

            <!-- NouSlider -->
        <script src="/js/plugins/nouslider/jquery.nouislider.min.js"></script>

            <!-- Switchery -->
        <script src="/js/plugins/switchery/switchery.js"></script>

            <!-- IonRangeSlider -->
        <script src="/js/plugins/ionRangeSlider/ion.rangeSlider.min.js"></script>

            <!-- iCheck -->
        <script src="/js/plugins/iCheck/icheck.min.js"></script>

            <!-- MENU -->
        <script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>

            <!-- Color picker -->
        <script src="/js/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>

            <!-- Clock picker -->
        <script src="/js/plugins/clockpicker/clockpicker.js"></script>

            <!-- Image cropper -->
        <script src="/js/plugins/cropper/cropper.min.js"></script>

            <!-- Date range use moment.js same as full calendar plugin -->
        <script src="/js/plugins/fullcalendar/moment.min.js"></script>

            <!-- Date range picker -->
        <script src="/js/plugins/daterangepicker/daterangepicker.js"></script>

            <!-- Select2 -->
        <script src="/js/plugins/select2/select2.full.min.js"></script>

            <!-- Nestable -->
        <script src="/js/plugins/nestable/jquery.nestable.js"></script>

            <!-- Projet -->
        <script src="/js/projet.js"></script>

            <!-- Menu -->
        <script src="/js/menu.js"></script>

        @scripts
        <script>
                $requestUtilisateursArchives = false;
                $requestClientsArchives = false;
                $(document).ready(function () {

                    $('#sidebar-back-select').click(function(){
                        alert("JS : #sidebar-back-select");
                    })

                    $( "#btn-modifierProjet-admin" ).click(function() {
                        //$("#div-consulterProjet").css("display","none");

                        jQuery.fx.off = true;
                        $("#div-consulterProjet-admin").hide();
                        $("#div-modifierProjet-admin").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-cancel-modifierProjet-admin" ).click(function() {
                        jQuery.fx.off = true;
                        $("#div-modifierProjet-admin").hide();
                        $("#div-consulterProjet-admin").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-modifierProjet-client" ).click(function() {
                        //$("#div-consulterProjet").css("display","none");
                        jQuery.fx.off = true;
                        $("#div-consulterProjet-client").hide();
                        $("#div-modifierProjet-client").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-cancel-modifierProjet-client" ).click(function() {
                        jQuery.fx.off = true;
                        $("#div-modifierProjet-client").hide();
                        $("#div-consulterProjet-client").show();
                        jQuery.fx.off = false;
                    });

                    function modeDraftProjet()
                    {
                        if($('#checkbox-draft-projet').is(':checked')){
                            $('#nestable-projet').removeClass("dd-nodrag");
                            $('.id-tache').hide();
                        }
                        else{
                            $('#nestable-projet').addClass("dd-nodrag");
                            $('.id-tache').show();
                        }
                    }
                    modeDraftProjet();
                    $('#checkbox-draft-projet').click(function() {
                        modeDraftProjet();
                    });

                    function modeDraftClient()
                    {
                        if($('#checkbox-draft-client').is(':checked')){
                            $('#nestable-client').removeClass("dd-nodrag");
                            $('.id-tache').hide();
                        }
                        else{
                            $('#nestable-client').addClass("dd-nodrag");
                            $('.id-tache').show();
                        }
                    }
                    modeDraftClient();
                    $('#checkbox-draft-client').click(function() {
                        modeDraftClient();
                    });

                    function modeDraftProjetAdmin()
                    {
                        if($('#checkbox-draft-projet-admin').is(':checked')){
                            $('#nestable-projet-admin').removeClass("dd-nodrag");
                            $('.id-tache').hide();
                        }
                        else{
                            $('#nestable-projet-admin').addClass("dd-nodrag");
                            $('.id-tache').show();
                        }
                    }
                    modeDraftProjetAdmin();
                    $('#checkbox-draft-projet-admin').click(function() {
                        modeDraftProjetAdmin();
                    });


                    $(".select2-input").select2();

                    $(".select2-predecesseur").select2({
                        placeholder : '@Messages("choosePredecessor")...',
                        maximumSelectionLength: 1
                    });

                    $(".select2-successeur").select2({
                        placeholder : '@Messages("chooseSuccessor")...'
                    });
                    $(".select2-client").select2({
                        placeholder : '@Messages("chooseClient")...',
                        maximumSelectionLength: 1
                    });

                    $(".select2-respo-projet").select2({
                        placeholder : '@Messages("chooseProjectManager")...',
                        maximumSelectionLength: 1
                    });
                    $(".select2-respo-tache").select2({
                        placeholder : '@Messages("chooseTaskResponsible")...',
                        maximumSelectionLength: 1
                    });

                    $('#notifTopBar').click(function (e) {
                        e.preventDefault();
                        jsRoutes.controllers.NotificationController.afficherNotifications().ajax({
                            success: function(html) {
                                var result = $('#refresh',html).html();
                                $('#refresh').empty().html(result);

                            },
                            //Case we have a problem
                            error: function(errorMessage){
                                alert(errorMessage);
                            }
                        });
                    });

                    $("#submitButton").click(function(e) {
                        var $form = $('#addProjectForm');
                        var $serialize= $form.serialize();
                        var $value = $(".btn-active").attr('value');
                        jsRoutes.controllers.ProjetController.ajouterProjet().ajax({
                            data :$serialize+ '&priorite='+$value,
                            success : function(data) {
                                alert("toto");

                            },
                            error: function(errorMessage){
                                alert("error");
                            }
                        });

                    });
                    $('.datatable-consulterClient').DataTable();
                    $('.dataTables-example').DataTable();

                    $('#projet_Tache').dataTable( {
                        "ordering": false
                    } );

                    $('#projet_Projet').dataTable( {
                        "ordering": false
                    } );

                    $('#dataTables-tdb-projet').DataTable();

                    $('#dataTables-tdb-tache').DataTable({
                        "columnDefs": [{
                            "searchable": false,
                            "orderable": false,
                            "targets": [6, 7]
                        } ]
                    });

                    $('#dataTables-admin-projet').DataTable({
                        "columnDefs": [{
                            "searchable": false,
                            "orderable": false,
                            "targets":6
                        } ]
                    });


                    $('#dataTables-admin-projet tbody').on( 'click', 'tr td:not(:last-child)', function () {
                        var $valueTr = $(this).parent('tr').attr('value');
                        jsRoutes.controllers.AdminController.afficherAdminProjetsSelect($valueTr).ajax({
                            success: function(html) {
                                var result = $('#refresh',html);
                                $('#refresh').empty().html(result);
                            },
                            //Case we have a problem
                            error: function(errorMessage){
                                alert(errorMessage);
                            }
                        });
                    });

                    $('#nestable-projet').nestable({
                        group: 1,
                        maxDepth: 4
                    }).on('change');
                    $('#nestable-client').nestable({
                        group: 1,
                        maxDepth: 4
                    }).on('change');

                    $('#btn-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').hide();
                        $('#div-modifierTache').show();
                        jQuery.fx.off = false;

                    });

                    $('#btn-fermer-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').show();
                        $('#div-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-valider-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').show();
                        $('#div-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-modifierTache-active').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').show();
                        $('#div-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').hide();
                        $('#div-projet-modifierTache').show();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-fermer-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').show();
                        $('#div-projet-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-valider-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').show();
                        $('#div-projet-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-modifierTache-active').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').show();
                        $('#div-projet-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#datepicker_date_debut .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"

                    });
                    $('#datepicker_date_fin_tot .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });
                    $('#datepicker_date_fin_tard .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#projet-tdb').slimScroll({
                        height: '130px'
                    });
                    $('#tache-tdb').slimScroll({
                        height: '130px'
                    });
                    $('#taches-retardes').slimScroll({
                        height: '130px'
                    });
                    $('#taches-proches').slimScroll({
                        height: '130px'
                    });
                    $('#taches-proposees').slimScroll({
                        height: '130px'
                    });
                    $('#bloc-notes-tdb').slimScroll({
                        height: '172px',
                        width: '100%'
                    });
                    $('.description-modal-tache').slimScroll({
                        height: '100px'
                    });

                    $('.list-task').slimScroll({
                        height: '90px'
                    });
                    $('.list-modif-client').slimScroll({
                        height: '130px'
                    });

                    $('.list-personnes-notifiees').slimScroll({
                        height: '85px'
                    });

                    $('[data-toggle="popover"]').popover()

                });

                $( document ).ajaxComplete(function() {

                    $('#sidebar-back-select').click(function(){
                        alert("JS : #sidebar-back-select");
                    })

                    $( "#btn-modifierProjet-admin" ).click(function() {
                        //$("#div-consulterProjet").css("display","none");

                        jQuery.fx.off = true;
                        $("#div-consulterProjet-admin").hide();
                        $("#div-modifierProjet-admin").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-cancel-modifierProjet-admin" ).click(function() {
                        jQuery.fx.off = true;
                        $("#div-modifierProjet-admin").hide();
                        $("#div-consulterProjet-admin").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-modifierProjet-client" ).click(function() {
                        //$("#div-consulterProjet").css("display","none");
                        jQuery.fx.off = true;
                        $("#div-consulterProjet-client").hide();
                        $("#div-modifierProjet-client").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-cancel-modifierProjet-client" ).click(function() {
                        jQuery.fx.off = true;
                        $("#div-modifierProjet-client").hide();
                        $("#div-consulterProjet-client").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-modifierProjet" ).click(function() {
                        //$("#div-consulterProjet").css("display","none");
                        jQuery.fx.off = true;
                        $("#div-consulterProjet").hide();
                        $("#div-modifierProjet").show();
                        jQuery.fx.off = false;
                    });

                    $( "#btn-cancel-modifierProjet" ).click(function() {
                        jQuery.fx.off = true;
                        $("#div-modifierProjet").hide();
                        $("#div-consulterProjet").show();
                        jQuery.fx.off = false;
                    });

                    $(".header-sidebar-projet").click(function(){

                        if($(this).next().is(":visible"))
                        {
                            next = $(this).next();
                            while (next!=null && next.hasClass("client-project"))
                            {
                                next.hide();
                                next = next.next();
                            }
                        }
                        else {
                            next = $(this).next();
                            while (next!=null && next.hasClass("client-project"))
                            {
                                next.show();
                                next = next.next();
                            }
                        }

                        $('.liste-projet-client').css('height',"100%");
                        height = $('.liste-projet-client').css('height');
                        height = parseInt(height);
                        height -= 230;
                        $('.liste-projet-client').css('height',height);

                    });

                    $( window ).resize(function() {
                        $('.liste-projet-client').css('height',"100%");
                        height = $('.liste-projet-client').css('height');
                        height = parseInt(height);
                        height -= 200;
                        $('.liste-projet-client').css('height',height);
                    });

                    $('.liste-projet-client').css('height',"100%");
                    height = $('.liste-projet-client').css('height');
                    height = parseInt(height);
                    height -= 200;
                    $('.liste-projet-client').css('height',height);


                    $('.sidebar-projet').click(function(){
                        $('.sidebar-projet.select').removeClass("select");
                        $(this).addClass("select");

                    });

                    $('#afficheListeProjet').click(function(){

                        if($("#col-sidebar-liste-projet").is(":visible")){
                            hideSideBarProjet();
                        }
                        else
                        {
                            showSideBarProjet();
                        }
                    });

                    $('#afficheRetour').click(function(){

                        if($("#col-sidebar-retour").is(":visible")){
                            hideSideBarRetour();
                        }
                        else
                        {
                            showSideBarRetour();
                        }
                    });

                    $( window ).resize(function() {
                        $('.liste-projet').css('height',"100%");
                        height = $('.liste-projet').css('height');
                        height = parseInt(height);
                        height -= 150;
                        $('.liste-projet').css('height',height);

                        /*if($(window).width()<1050){
                            hideSideBarProjet();
                        }
                        else {
                            showSideBarProjet();
                        }*/
                    });

                    function hideSideBarProjet()
                    {
                        $('#col-sidebar-liste-projet').hide();
                        $('#afficheListeProjet').css("width","25px");
                        $("#col-consulterProjet").removeClass("col-md-10");
                        $("#col-consulterProjet").addClass("col-md-12");
                        $("#icon-show-liste-projet").removeClass("fa-outdent");
                        $("#icon-show-liste-projet").addClass("fa-indent");
                    }
                    function showSideBarProjet()
                    {
                        $('#col-sidebar-liste-projet').show();
                        $('#afficheListeProjet').css("width","170px");
                        $("#col-consulterProjet").removeClass("col-md-12");
                        $("#col-consulterProjet").addClass("col-md-10");
                        $("#icon-show-liste-projet").removeClass("fa-indent");
                        $("#icon-show-liste-projet").addClass("fa-outdent");
                    }

                    function hideSideBarRetour()
                    {
                        $('#col-sidebar-retour').hide();
                        $('#afficheRetour').css("width","25px");
                        $("#col-consulterProjet").removeClass("col-md-10");
                        $("#col-consulterProjet").addClass("col-md-12");
                        $("#icon-show-liste-projet").removeClass("fa-outdent");
                        $("#icon-show-liste-projet").addClass("fa-indent");
                    }
                    function showSideBarRetour()
                    {
                        $('#col-sidebar-retour').show();
                        $('#afficheRetour').css("width","170px");
                        $("#col-consulterProjet").removeClass("col-md-12");
                        $("#col-consulterProjet").addClass("col-md-10");
                        $("#icon-show-liste-projet").removeClass("fa-indent");
                        $("#icon-show-liste-projet").addClass("fa-outdent");
                    }



                    $('.liste-projet').css('height',"100%");
                    height = $('.liste-projet').css('height');
                    height = parseInt(height);
                    height -= 150;
                    $('.liste-projet').css('height',height);


                    $(".select2-predecesseur").select2({
                        placeholder : '@Messages("choosePredecessor")...',
                        maximumSelectionLength: 1
                    });

                    $(".select2-successeur").select2({
                        placeholder : '@Messages("chooseSuccessor")...'
                    });
                    $(".select2-client").select2({
                        placeholder : '@Messages("chooseClient")...',
                        maximumSelectionLength: 1
                    });

                    $(".select2-respo-projet").select2({
                        placeholder : '@Messages("chooseProjectManager")...',
                        maximumSelectionLength: 1
                    });
                    $(".select2-respo-tache").select2({
                        placeholder : '@Messages("chooseTaskResponsible")...',
                        maximumSelectionLength: 1
                    });

                    $('#unite').select2({
                        minimumResultsForSearch: -1
                    });
                    $('#unite-projet').select2({
                        minimumResultsForSearch: -1
                    });

                    $('[data-toggle="popover"]').popover();
                    // activate Nestable for list 1

                    $('#nestable-projet').nestable({
                        group: 1,
                        maxDepth: 4
                    }).on('change');
                    $('#nestable-client').nestable({
                        group: 1,
                        maxDepth: 4
                    }).on('change');


                    $('#notifTopBar').click(function (e) {
                        e.preventDefault();
                        jsRoutes.controllers.NotificationController.afficherNotifications().ajax({
                            success: function(html) {
                                var result = $('#refresh',html).html();
                                $('#refresh').empty().html(result);

                            },
                            //Case we have a problem
                            error: function(errorMessage){
                                alert(errorMessage);
                            }
                        });
                    });
                    $('.datatable-consulterClient').DataTable();
                    $('#dataTables-tdb-projet').DataTable();


                    $('#dataTables-tdb-tache').DataTable({
                        "columnDefs": [{
                            "searchable": false,
                            "orderable": false,
                            "targets": [6, 7]
                        } ]
                    });

                    $('#responsableProjet').select2();

                    $('#client').select2();

                    $('#responsableProjet-projet').select2();

                    $('#client-projet').select2();

                    $('.dataTables-example').DataTable();

                    $('#projet_Projet').dataTable( {
                        "ordering": false
                    } );

                    $('#dataTables-admin-projet').DataTable({
                        "columnDefs": [{
                            "searchable": false,
                            "orderable": false,
                            "targets":6
                        } ]
                    });

                    $('#projet_Tache').dataTable( {
                        "ordering": false
                    } );


                    $('#dataTables-admin-client').DataTable({
                        "columnDefs": [{
                            "searchable": false,
                            "orderable": false,
                            "targets":6
                        } ]
                    });

                    $('#dataTables-admin-projet tbody').on( 'click', 'tr td:not(:last-child)', function () {
                        var $valueTr = $(this).parent('tr').attr('value');
                        jsRoutes.controllers.AdminController.afficherAdminProjetsSelect($valueTr).ajax({
                            success: function(html) {
                                var result = $('#refresh',html);
                                $('#refresh').empty().html(result);
                            },
                            //Case we have a problem
                            error: function(errorMessage){
                                alert(errorMessage);
                            }
                        });
                    });

                    $('#dataTables-admin-user').DataTable({
                        "columnDefs": [{
                            "searchable": false,
                            "orderable": false,
                            "targets":7
                        } ]
                    });

                    $('#btn-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').hide();
                        $('#div-modifierTache').show();
                        jQuery.fx.off = false;

                    });

                    $('#btn-fermer-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').show();
                        $('#div-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-valider-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').show();
                        $('#div-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-modifierTache-active').click(function() {
                        jQuery.fx.off = true;
                        $('#div-consulterTache').show();
                        $('#div-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').hide();
                        $('#div-projet-modifierTache').show();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-fermer-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').show();
                        $('#div-projet-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-valider-modifierTache').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').show();
                        $('#div-projet-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#btn-projet-modifierTache-active').click(function() {
                        jQuery.fx.off = true;
                        $('#div-projet-consulterTache').show();
                        $('#div-projet-modifierTache').hide();
                        jQuery.fx.off = false;

                    });

                    $('#datepicker_date_debut .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"

                    });

                    $('#datepicker_date_fin_tot .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#datepicker_date_fin_tard .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#datepicker_projet_th_debut .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#datepicker_projet_th_fin .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#datepicker_projet_th_debut-projet .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#datepicker_projet_th_fin-projet .input-group.date').datepicker({
                        todayBtn: "linked",
                        keyboardNavigation: false,
                        forceParse: false,
                        calendarWeeks: true,
                        autoclose: true,
                        language: "fr-FR"
                    });

                    $('#projet-tdb').slimScroll({
                        height: '130px'
                    });
                    $('#tache-tdb').slimScroll({
                        height: '130px'
                    });
                    $('#taches-retardes').slimScroll({
                        height: '130px'
                    });
                    $('#taches-proches').slimScroll({
                        height: '130px'
                    });
                    $('#taches-proposees').slimScroll({
                        height: '130px'
                    });
                    $('#bloc-notes-tdb').slimScroll({
                        height: '172px',
                        width: '100%'
                    });
                    $('.description-modal-tache').slimScroll({
                        height: '100px'
                    });

                    $('.list-task').slimScroll({
                        height: '90px'
                    });
                    $('.list-modif-client').slimScroll({
                        height: '130px'
                    });

                    $('.list-personnes-notifiees').slimScroll({
                        height: '85px'
                    });
                    /*
                     $('.table-suppr-user').slimScroll({
                     height: '300px'
                     });
                     */

                    $('.footable').footable();

                    // $('#modal-tdb-tache').modal();


                    function modeDraftProjet()
                    {
                        if($('#checkbox-draft-projet').is(':checked')){
                            $('#nestable-projet').removeClass("dd-nodrag");
                            $('.id-tache').hide();
                        }
                        else{
                            $('#nestable-projet').addClass("dd-nodrag");
                            $('.id-tache').show();
                        }
                    }
                    modeDraftProjet();
                    $('#checkbox-draft-projet').click(function() {
                        modeDraftProjet();
                    });

                    function modeDraftClient()
                    {
                        if($('#checkbox-draft-client').is(':checked')){
                            $('#nestable-client').removeClass("dd-nodrag");
                            $('.id-tache').hide();
                        }
                        else{
                            $('#nestable-client').addClass("dd-nodrag");
                            $('.id-tache').show();
                        }
                    }
                    modeDraftClient();
                    $('#checkbox-draft-client').click(function() {
                        modeDraftClient();
                    });

                    function modeDraftProjetAdmin()
                    {
                        if($('#checkbox-draft-projet-admin').is(':checked')){
                            $('#nestable-projet-admin').removeClass("dd-nodrag");
                            $('.id-tache').hide();
                        }
                        else{
                            $('#nestable-projet-admin').addClass("dd-nodrag");
                            $('.id-tache').show();
                        }
                    }
                    modeDraftProjetAdmin();
                    $('#checkbox-draft-projet-admin').click(function() {
                        modeDraftProjetAdmin();
                    });

                    /**
                     * Methode Ajax pour aller récuperer des informations d'un utilisateur
                     **/
                    $('#dataTables-admin-user tbody').on( 'click', 'tr td:not(:last-child)', function () {
                        var $id = $(this).parent('tr').attr('value');
                        jsRoutes.controllers.AdminController.afficherModalUtilisateur($id).ajax({
                            success: function(utilisateur) {
                                //console.log(utilisateur);
                                $("#dataTables-admin-user").dataTable().fnDestroy();

                                /* fill modal values*/
                                $('#formLastName').val(utilisateur.nom);
                                $('#formFirstName').val(utilisateur.prenom);
                                $('#formEmail').val(utilisateur.email);
                                $('#formTel').val(utilisateur.telephone);
                            },
                            //Case we have a problem
                            error: function(errorMessage){
                                alert(errorMessage);
                            }
                        });
                    });

                    /**
                     * Methode Ajax pour aller récuperer des informations d'un client
                     **/
                    $('#dataTables-admin-client tbody').on( 'click', 'tr td:not(:last-child)', function () {
                        var $id = $(this).parent('tr').attr('value');
                        jsRoutes.controllers.AdminController.afficherModalClient($id).ajax({
                            success: function(client) {
                                //console.log(client);
                                $("#dataTables-admin-client").dataTable().fnDestroy();

                                /* fill modal values*/
                                $('#formClientName').val(client.nom);
                                $('#formClientAdress').val(client.adresseClient.adresse);
                                $('#formZipCode').val(client.adresseClient.zipCode);
                                $('#formCity').val(client.adresseClient.ville);
                                $('#formCountry').val(client.adresseClient.pays);
                                /* priority */
                                $('input[name="radioInline"][value="option' + client.priorite + '"]').prop('checked', true);

                                /* Look for Projects and contacts */
                                jsRoutes.controllers.ProjetController.afficherProjetsClient($id).ajax({

                                    success: function(listProjets) {
                                        var projetTableBody = $('#table-modal-client-projets-body');
                                        $("#table-modal-client-projets-body").empty();
                                        console.log(listProjets);
                                        $("#dataTables-admin-client").dataTable().fnDestroy();
                                        if(listProjets.length != 0){
                                            $(listProjets).each(function(index, projet) {
                                                var p ="";
                                                p+=('<tr>');
                                                p+=('<td class="first-td">'+projet.nom+'</td>');
                                                p+=('<td class="td-btn-suppr" style="vertical-align:middle;"><i class="fa fa-times"></i></td>');
                                                p+=('</tr>');

                                                projetTableBody.append(p);
                                            });
                                        }
                                    }
                                });
                                jsRoutes.controllers.ContactController.afficherContactsClient($id).ajax({
                                    success: function(listContacts) {
                                        var contactsTableBody = $('#table-modal-client-contacts-body');
                                        $("#table-modal-client-contacts-body").empty();

                                        console.log(listContacts);
                                        $("#dataTables-admin-client").dataTable().fnDestroy();
                                        if(listContacts.length != 0){
                                            $(listContacts).each(function(index, contact) {
                                                var c ="";
                                                c+=('<tr>');
                                                c+=('<td class="first-td">'+contact.nom+ " "+ contact.prenom+'</td>');
                                                c+=('<td class="td-btn-suppr" style="vertical-align:middle;"><i class="fa fa-times"></i></td>');
                                                c+=('</tr>');

                                                contactsTableBody.append(c);
                                            });
                                        }
                                    }
                                });

                            },
                            //Case we have a problem
                            error: function(errorMessage){
                                alert(errorMessage);
                            }
                        });
                    });

                });

                /* Afficher les Clients archivés */
                function clientsArchived(){
                    $('#checkBoxClientsArchived').change(function() {
                        if($(this).is(":checked")) {
                            console.log("CHECKED");
                            if(!$requestClientsArchives){
                                console.log("REQUESTCLIENT 1");
                                jsRoutes.controllers.AdminController.afficherClientsArchives().ajax({
                                    success : function(data) {
                                        var clientList = $('#dataTables-admin-client-body');
                                        console.log(data);
                                        $("#dataTables-admin-client").dataTable().fnDestroy();
                                        $(data).each(function(index, client) {
                                            var list ="";
                                            list+=('<tr class="archived">');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">'+client.nom+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">'+
                                            client.adresseClient.adresse+", "+client.adresseClient.zipCode+", "+client.adresseClient.ville+", "+client.adresseClient.pays+
                                            '</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">'+client.listContactsSize+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">'+client.listProjetsSize+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">'+client.listTachesSize+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">'+client.priorite+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-client">@Messages("yes")</td>');
                                            list+=('<td class="td-btn-suppr" style="vertical-align:middle;" data-toggle="modal" data-target="#modal-suppr-client"><i class="fa fa-times"></i></td>');
                                            list+=('</tr>');

                                            clientList.append(list);
                                        });
                                    }
                                });
                                $requestClientsArchives = true;
                            }else{
                                $('.archived').show();
                            }
                        } else {
                            console.log("UNCHECKED");
                            $('.archived').hide();
                        }
                    });
                }

                /* Afficher les utilisateurs archivés */
                function utilisateursArchived(){
                    $('#checkboxUsersArchived').change(function() {
                        if($(this).is(":checked")) {
                            console.log("CHECKED");
                            if(!$requestUtilisateursArchives){

                                jsRoutes.controllers.AdminController.afficherUtilisateursArchives().ajax({
                                    success : function(data) {
                                        var utilisateurList = $('#dataTables-admin-user-body');
                                        console.log(data);
                                        $("#dataTables-admin-user").dataTable().fnDestroy();
                                        $(data).each(function(index, utilisateur) {
                                            var list ="";
                                            list+=('<tr class="archived">');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">'+utilisateur.nom+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">'+utilisateur.prenom+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">'+utilisateur.email+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">'+utilisateur.telephone+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">'+utilisateur.listProjetsResponsableSize+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">'+utilisateur.listTachesSize+'</td>');
                                            list+=('<td class="td-modal" data-toggle="modal" data-target="#modal-modif-user">@Messages("yes")</td>');
                                            list+=('<td class="td-btn-suppr" style="vertical-align:middle ;" data-toggle="modal" data-target="#modal-suppr-user"><i class="fa fa-times"></i></td>');
                                            list+=('</tr>');

                                            utilisateurList.append(list);
                                        });
                                    }
                                });

                                $requestUtilisateursArchives = true;
                            }else{
                                $('.archived').show();
                            }
                        } else {
                            console.log("UNCHECKED");
                            $('.archived').hide();
                        }
                    });


                }

        </script>
    </body>
</html>